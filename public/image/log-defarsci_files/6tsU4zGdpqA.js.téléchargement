;/*FB_PKG_DELIM*/

__d("CometUFICommentListRenderer_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:!0,kind:"LocalArgument",name:"canShowSeenState"},{kind:"RootArgument",name:"feedLocation"},{kind:"RootArgument",name:"feedbackSource"},{defaultValue:!1,kind:"LocalArgument",name:"hasScenario"}],kind:"Fragment",metadata:null,name:"CometUFICommentListRenderer_feedback",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[{kind:"Variable",name:"feedback_source_integer",variableName:"feedbackSource"}],kind:"ScalarField",name:"is_eligible_for_enhanced_comment_updates",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_synced_qa_post",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subscription_target_id",storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"broadcast_is_ama_enabled",storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"location",variableName:"feedLocation"},{kind:"Literal",name:"supported",value:"4wVd9M"}],concreteType:null,kind:"LinkedField",name:"comment_list_renderer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:[{kind:"Variable",name:"hasScenario",variableName:"hasScenario"}],documentName:"CometUFICommentListRenderer_feedback",fragmentName:"CometUFICommentListRendererForDisplayComments_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBCommentListRendererForDisplayComments",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFICommentListRenderer_feedback",fragmentName:"CometUFICommentListRendererForCommentsAPI_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBCommentListRendererForCommentsAPI",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFICommentListRenderer_feedback",fragmentName:"CometUFICommentListRendererForCommentsAPIPermalink_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBCommentListRendererForCommentsAPIPermalink",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFICommentListRenderer_feedback",fragmentName:"CometUFICommentListRendererForCommentsAPIMediaViewer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBCommentListRendererForCommentsAPIMediaViewer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFICommentListRenderer_feedback",fragmentName:"CometUFICommentListRendererForCommentsAPITahoe_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBCommentListRendererForCommentsAPITahoe",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFICommentListRenderer_feedback",fragmentName:"CometUFICommentListRendererForCommentsAPITahoeWithLiveVOD_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBCommentListRendererForCommentsAPITahoeWithLiveVOD",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFICommentListRenderer_feedback",fragmentName:"CometUFICommentListRendererForCommentsAPIWorkplaceKnowledgeNote_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBCommentListRendererForCommentsAPIWorkplaceKnowledgeNote",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFICommentListRenderer_feedback",fragmentName:"CometUFICommentListRendererForCommentsAPIBizInbox_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBCommentListRendererForCommentsAPIBizInbox",abstractKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useCometHandleCommitCommentCreate_feedback"}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("useCometHandleCommitCommentCreate_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCometHandleCommitCommentCreate_feedback",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("useCometHandleCommitCommentCreate.react",["CometRelay","CometUFICommentListenersContext","CometUFIConversationGuideLoggingContext","CometUFIConversationGuideUtils","CometUFIQPLInstanceKeyContext","RelayUFI2CommentsKeyContext","react","requireDeferred","useCometHandleCommitCommentCreate_feedback.graphql","useMinifiedProductAttribution","useTrackingCodeFnForComet","useTriggerAccessibilityAlert","useTriggeredStoryCTAHandler"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useCallback,k=e.useContext,l=e.useMemo,m=e.useRef,n=c("requireDeferred")("CometUFICreateCommentMutation").__setRef("useCometHandleCommitCommentCreate.react"),o=c("requireDeferred")("CometUFIFunnelLogger").__setRef("useCometHandleCommitCommentCreate.react");function a(a){var e=a.feedbackRef,f=a.feedLocation,g=a.focusCommentID,i=a.inlineReplyParentID,p=a.onCommit,q=a.referringFeedLocation,r=a.setError,s=a.setLocallyComposedCommentIds,t=a.storyID;a=d("CometRelay").useFragment(h!==void 0?h:h=b("useCometHandleCommitCommentCreate_feedback.graphql"),e);var u=a==null?void 0:a.id;e=k(d("CometUFICommentListenersContext").CometUFICommentListenersContext);var v=e.getEmitter,w=e.isInitialized,x=m(null),y=c("useTriggerAccessibilityAlert")();a=c("useTriggeredStoryCTAHandler")();var z=a[0],A=k(c("RelayUFI2CommentsKeyContext")),B=c("useTrackingCodeFnForComet")(),C=c("useMinifiedProductAttribution")(),D=k(c("CometUFIQPLInstanceKeyContext"));e=k(c("CometUFIConversationGuideLoggingContext"));var E=e.guideShown,F=e.sessionID,G=l(function(){return{assistant_caller:d("CometUFIConversationGuideUtils").CALLER_ID,conversation_guide_session_id:F,conversation_guide_shown:E}},[E,F]),H=j(function(a){var b;o.onReady(function(a){return a.addPoint(D,a.CometUFIFunnelLoggerEvents.COMMENT_CREATE_SUCCESS)});b=(b=a.comment_create)==null?void 0:(b=b.feedback_comment_edge)==null?void 0:(b=b.node)==null?void 0:b.id;a=(a=a.comment_create)==null?void 0:(a=a.feedback_comment_edge)==null?void 0:(a=a.node)==null?void 0:a.fishbowl_comment_ordering_mode;var c=x.current;c&&a&&c.onOptionChange(a);if(u==null||b==null||!w)return;v(u,f).emit("comment_create",u,b)},[w,f,u,v,D]),I=j(function(a){o.onReady(function(a){return a.addPoint(D,a.CometUFIFunnelLoggerEvents.COMMENT_CREATE_ERROR)}),r(a)},[D,r]);return j(function(a){var b=a.actorID,c=a.clientID,d=a.commentData,e=a.entitiesByID,h=a.environment,j=a.feedbackSource,k=a.getTrackingDataFn,l=a.topLevelFeedbackID,m=a.topLevelViewOption,o=a.updater,r=a.viewOption;if(!d)return;(r==="FISHBOWL_GUESTS"||m==="FISHBOWL_GUESTS")&&(d.privacy_type="SPOTLIGHT_TAB");z("COMMENT");a=B(k);k=a.tracking||[];k=[].concat(k,[JSON.stringify(G)]);var u=babelHelpers["extends"]({},a,{tracking:k});n.onReadyImmediately(function(a){s(function(a){return a.has(c)?a:new Set(a).add(c)}),p&&p(),a.commit({UFI2CommentsProvider_commentsKey:A,actorID:b,clientID:c,entitiesByID:e,environment:h,feedbackSource:j,feedLocation:f,focusCommentID:g,inlineReplyParentID:i,input:babelHelpers["extends"]({},d,{attribution_id_v2:C},u),onCompleted:H,onError:I,referringFeedLocation:q,storyID:t,topLevelFeedbackId:l,topLevelViewOption:m,triggerAccessibilityAlert:y,updater:o,useDefaultActor:!1,viewOption:r})})},[z,B,G,s,p,A,f,g,i,C,H,I,q,t,y])}g["default"]=a}),98);
__d("CometUFICommentListRenderer.react",["CometFocusedStoryViewReferringFeedLocationContext","CometRelay","CometUFICommentListComposerProvider.react","CometUFICommentListLayoutContext","CometUFICommentListRenderer_feedback.graphql","CometUFIQPLInstanceKeyContext","CometUFIReparentedCommentIDsContext.react","ErrorGuard","UFI2RealtimeContainer.react","mergeRefs","react","recoverableViolation","requireDeferred","useBoolean","useCometHandleCommitCommentCreate.react","useCometUFICodedErrorDialog","useTriggeredStoryCTAHandler"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useContext,n=e.useMemo,o=e.useRef,p=e.useState,q=c("requireDeferred")("CometUFIDeleteCommentSubscription").__setRef("CometUFICommentListRenderer.react"),r=c("requireDeferred")("CometUFIEditCommentSubscription").__setRef("CometUFICommentListRenderer.react"),s=c("requireDeferred")("CometUFIFeedbackCommentReactSubscription").__setRef("CometUFICommentListRenderer.react"),t=c("requireDeferred")("CometUFIFunnelLogger").__setRef("CometUFICommentListRenderer.react"),u=c("requireDeferred")("CometUFIToggleCommentPermissionSubscription").__setRef("CometUFICommentListRenderer.react"),v=c("requireDeferred")("CometUFIWorkQACommentTypeUpdateSubscription").__setRef("CometUFICommentListRenderer.react");function a(a){var e=a.displayCommentsContext,f=a.fallback,g=a.feedback,j=a.feedbackSource,w=a.feedLocation,x=a.focusCommentID,y=a.listRef,z=a.narrow,A=a.onCommitCommentCreate;a=a.storyRenderLocation;var B=d("CometRelay").useFragment(h!==void 0?h:h=b("CometUFICommentListRenderer_feedback.graphql"),g),C=o(null),D=d("CometRelay").useRelayEnvironment();g=c("useTriggeredStoryCTAHandler")();var E=g[0];g=p(null);var F=g[0];g=g[1];var G=p(null),H=G[0];G=G[1];var I=c("useBoolean")(!1),J=I.setTrue;I=I.value;var K=c("useCometUFICodedErrorDialog")(),L=K.errorDialog,M=K.setError;K=m(d("CometUFIReparentedCommentIDsContext.react").CometUFIReparentedCommentIDsContext);var aa=K.addReparentedCommentIds,N=B==null?void 0:B.id,O=B==null?void 0:B.subscription_target_id;K=l(function(){var a;if(N==null||O==null)return null;var b=!1,d=[],e={dispose:function(){b=!0,d.forEach(function(a){return(i||(i=c("ErrorGuard"))).applyWithGuard(a,null,[])})}};s.onReady(function(a){if(!b){a=a.subscribe(D,{top_level_feedback_id:N},!1,!0);d.push(a.dispose)}});B&&B.is_eligible_for_enhanced_comment_updates===!0&&!((a=B.associated_video)==null?void 0:a.broadcast_is_ama_enabled)&&(q.onReady(function(a){if(!b){a=a.subscribe({addReparentedCommentIds:aa,environment:D,feedbackSource:j,topLevelFeedbackID:N});d.push(a.dispose)}}),r.onReady(function(a){if(!b){a=a.subscribe({environment:D,topLevelFeedbackID:N});d.push(a.dispose)}}));B&&B.is_synced_qa_post===!0&&v.onReady(function(a){if(!b){a=a.subscribe({environment:D,feedbackID:N});d.push(a.dispose)}});return e},[D,B,N,j,O]);var ba=l(function(){var a=C.current;if(a==null)return;a.Actions.expandList({focusComposer:!0,scrollToComposer:!0})},[]),ca=l(function(){if(N==null||O==null)return;var a=!1,b=function(){},c={dispose:function(){a=!0,b()}};u.onReady(function(c){if(!a){c=c.subscribe(D,{feedback_id:N},!1);b=c.dispose}});return c},[D,N,O]),P=m(c("CometUFIQPLInstanceKeyContext")),da=o(null),Q=l(function(a){t.onReady(function(a){return a.addPoint(P,a.CometUFIFunnelLoggerEvents.COMMENT_EDIT_ERROR)}),M(a)},[P,M]),R=p(function(){return new Set()}),S=R[0];R=R[1];var T=p(function(){return new Set()}),U=T[0],ea=T[1];T=l(function(a){if(a==null)return;var b=(a=a.node)==null?void 0:a.id;if(b==null){c("recoverableViolation")("Could not discern an `id` having received a realtime comment. Realtime comment handling might be broken. Investigate immediately.","ufi2");return}ea(function(a){return new Set(a).add(b)})},[]);var V=m(c("CometFocusedStoryViewReferringFeedLocationContext"));V=c("useCometHandleCommitCommentCreate.react")({feedbackRef:B,feedLocation:w,focusCommentID:x,onCommit:A,referringFeedLocation:V,setError:M,setLocallyComposedCommentIds:R});var W=l(function(){E("COMMENT_BUTTON_TAP")},[E]),X=n(function(){return c("mergeRefs")(y,C)},[y]),fa=n(function(){return{narrow:z}},[z]);if(N==null){c("recoverableViolation")("No id on feedback when fetching from relay story in CometUFICommentListRenderer, this indicates relays store/environment has been bonkered some how","ufi2");return null}var Y=B==null?void 0:B.comment_list_renderer,Z,$;(Y==null?void 0:Y.__typename)==="XFBCommentListRendererForDisplayComments"?Z={depth:0,displayCommentsContext:e,editingCommentID:F,fallback:f,feedbackSource:j,feedbackTargetID:N,feedLocation:w,focusCommentID:x,listRef:X,locallyComposedCommentIds:S,onAddCommentClick:ba,onCommitCommentCreate:V,onComposerFocusCallback:W,onEditCommentError:Q,onRealtimeCommentReceived:T,onTranslateAllClick:J,realtimeCommentIds:U,renderedTranslationCommentID:H,renderer:Y,setEditingCommentID:g,setRenderedTranslationCommentID:G,shouldRequestTranslationForAllComments:I,storyRenderLocation:a,subscribeToCommentToggling:ca,useDefaultActor:!1,viewSelectorRef:da}:((Y==null?void 0:Y.__typename)==="XFBCommentListRendererForCommentsAPI"||(Y==null?void 0:Y.__typename)==="XFBCommentListRendererForCommentsAPIPermalink"||(Y==null?void 0:Y.__typename)==="XFBCommentListRendererForCommentsAPIMediaViewer"||(Y==null?void 0:Y.__typename)==="XFBCommentListRendererForCommentsAPITahoe"||(Y==null?void 0:Y.__typename)==="XFBCommentListRendererForCommentsAPITahoeWithLiveVOD"||(Y==null?void 0:Y.__typename)==="XFBCommentListRendererForCommentsAPIWorkplaceKnowledgeNote"||(Y==null?void 0:Y.__typename)==="XFBCommentListRendererForCommentsAPIBizInbox")&&($={editingCommentID:F,feedbackSource:j,feedLocation:w,focusCommentID:x,handleCreateCommentProps:{onCommit:A,setError:M,setLocallyComposedCommentIds:R},listRef:X,locallyComposedCommentIds:S,onComposerFocusCallback:W,onEditCommentError:Q,onRealtimeCommentReceived:T,onTranslateAllClick:J,realtimeCommentIds:U,renderedTranslationCommentID:H,setEditingCommentID:g,setRenderedTranslationCommentID:G,shouldRequestTranslationForAllComments:I,storyRenderLocation:a,useDefaultActor:!1});f=k.jsx(d("CometRelay").MatchContainer,{match:Y,props:(e=Z)!=null?e:babelHelpers["extends"]({},$,{renderer:Y})});return k.jsxs(c("UFI2RealtimeContainer.react"),{subscribe:K,children:[k.jsx(d("CometUFIReparentedCommentIDsContext.react").CometUFIReparentedCommentIDsContextProvider,{children:k.jsx(c("CometUFICommentListComposerProvider.react"),{children:k.jsx(c("CometUFICommentListLayoutContext").Provider,{value:fa,children:f})})}),L]})}a.displayName=a.name+" [from "+f.id+"]";e=k.memo(a);g["default"]=e}),98);
__d("useCometUFISubscriptionManager",["JSScheduler","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useCallback,k=b.useRef;function a(){var a=k(new Set()),b=k(new Set()),e=k(!1),f=j(function(b){a.current.add(b);e.current&&b.subscribe();return{dispose:function(){b.unsubscribe(),a.current["delete"](b)}}},[]),g=j(function(){e.current||(e.current=!0,a.current.forEach(function(a){var f=(i||(i=d("JSScheduler"))).scheduleSpeculativeCallback(function(){!e.current?c("recoverableViolation")("Scheduled callback to activate subscription was not canceled","ufi2"):(b.current["delete"](f),a.subscribe())});b.current.add(f)}))},[]),h=j(function(){e.current&&(e.current=!1,a.current.forEach(function(a){return a.unsubscribe()}),b.current.forEach(function(a){return(i||(i=d("JSScheduler"))).cancelCallback(a)}),b.current.clear())},[]);return[f,g,h]}g["default"]=a}),98);
__d("CometUFIRealtimeRoot.react",["UFI2RealtimeContext","react","useCometUFISubscriptionManager"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function a(a){var b=a.children;a=a.enabled;var d=a===void 0?!0:a;a=c("useCometUFISubscriptionManager")();var e=a[0],f=a[1],g=a[2];j(function(){if(d){f();return function(){g()}}},[d,f,g]);return i.jsx(c("UFI2RealtimeContext").Provider,{value:e,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);